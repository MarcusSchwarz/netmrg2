{{>settingsheader}}
            <h1 class="page-header">Apply Templates</h1>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th class="nowrap">[<span id="selectall" class="glyphicon glyphicon-asterisk" title="select all"></span>] [<span id="selectnothing" class="glyphicon glyphicon-unchecked" title="select nothing"></span>] [<span id="selectinvert" class="glyphicon glyphicon-minus" title="invert selection"></span>]</th>
            </tr>
        </thead>
        <tbody>
        {{#listofgraphs}}
            <tr>
                <td>
                    <input class="netmrg-check-scripts" type="checkbox" name="checkboxes[]" value="{{id}}" data-csrftoken="{{csrftoken}}" {{checked}}> {{name}}
                </td>
            </tr>
        {{/listofgraphs}}
        </tbody>
    </table>
</div>
<div class="table-responsive">
    <select multiple class="form-control" name="subdev_id[]" size="10">
        {{#subdevices}}
            <option value="{{id}}">{{dev_name}} - {{sub_name}}</option>
        {{/subdevices}}
    </select>
</div>

<button class="btn btn-lg btn-primary btn-block" type="submit">Apply Templates</button>

<p class="text-center">
    <a href="#" onclick="history.back();return false;">Abort, go back</a>
</p>



<script>
    $(".confirm").confirm({
        title: 'Confirmation',
        confirmButtonClass: 'btn-danger',
        post: true
    });

    $("#batchdelete").confirm({
        title: 'Confirmation',
        confirm: function() {
            var delids = $('.netmrg-check-scripts').map(
                    function(k, v) {
                        if($(v).prop('checked')) {
                            return $(v).prop('value');
                        }
                    }
            );
            if(delids.length < 1) {
                alert('nothing selected');
                return false;
            }
            var form = $('<form method="post" class="hide" action="{{#route}}/settings/templategraphs/delete?type={{graphtype}}{{/route}}"></form>');
            var z = $('.netmrg-check-scripts').first().data('csrftoken');
            if (z) {
                var csrf = $('<input type="hidden" name="csrftoken" value="' + z + '">');
                form.append(csrf);
            }
            var ids = $('<input type="hidden" name="delids" value="' + delids.get().join(',') + '">');
            form.append(ids);
            $("body").append(form);

            form.submit();
            return false;
        }
    });


    $(function() {
        $('#selectall').click(function() {
            $('.netmrg-check-scripts').prop('checked', true);
        });
        $('#selectnothing').click(function() {
            $('.netmrg-check-scripts').prop('checked', false);
        });
        $('#selectinvert').click(function() {
            $('.netmrg-check-scripts').click();
        });
    });
</script>

{{>settingsfooter}}
